<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Тест на множинні інтелекти – за моделлю множинного інтелекту Говарда Гарднера для Лілі Москалюк від Хром'яків</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 700px;
      margin: 40px auto;
      padding: 20px;
      line-height: 1.5;
    }
    .question {
      font-size: 1.2em;
      margin-bottom: 15px;
    }
    .options button {
      display: block;
      width: 100%;
      margin: 8px 0;
      padding: 12px;
      font-size: 1em;
      cursor: pointer;
      text-align: left;
      border: none;
      border-radius: 6px;
      font-weight: bold;
    }
    /* Button colors with text color adjusted */
    .btn-1 {
      background-color: #d9534f; /* red */
      color: white;
    }
    .btn-2 {
      background-color: #f0ad4e; /* yellow/orange */
      color: black;
    }
    .btn-3 {
      background-color: #d4edda; /* light green */
      color: black;
    }
    .btn-4 {
      background-color: #28a745; /* green */
      color: white;
    }
    #result {
      font-size: 1.2em;
      margin-top: 30px;
      padding: 10px;
      background-color: #f0f8ff;
      border-radius: 10px;
    }
    #name-prompt {
      text-align: center;
      margin-top: 100px;
    }
    #start-btn {
      padding: 10px 20px;
      font-size: 1.1em;
      margin-top: 10px;
      cursor: pointer;
      border-radius: 6px;
      background-color: #007bff;
      color: white;
      border: none;
    }
    #categoryInfo {
      position: absolute;
      max-width: 320px;
      max-height: 400px;
      overflow-y: auto;
      background: #fff;
      border: 1px solid #888;
      border-radius: 8px;
      padding: 15px;
      box-shadow: 2px 2px 12px rgba(0,0,0,0.2);
      font-size: 0.9em;
      z-index: 9999;
      display: none;
      pointer-events: none;
      line-height: 1.3;
      white-space: normal;
    }
  </style>
</head>
<body>

  <div id="name-prompt">
    <h2>Введіть ваше ім’я, щоб розпочати тест</h2>
    <input type="text" id="username" placeholder="Ваше ім’я" /><br><br>
    <h3>Введіть ваш вік</h3>
    <input type="number" id="userage" placeholder="Ваш вік" min="0" max="120" /><br><br>
    <h3>Оберіть стать</h3>
    <select id="usergender">
      <option value="">-- Оберіть стать --</option>
      <option value="feminin">Жіноча</option>
      <option value="masculin">Чоловіча</option>
    </select><br><br>
    <button id="start-btn">Почати тест</button>
  </div>

  <div id="quiz-container" style="display:none;">
    <div id="question-number"></div>
    <div id="question-text" class="question"></div>
    <div class="options" id="options-container"></div>
  </div>

  <div id="result" style="display:none;">
    <h2 id="result-title"></h2>
    <canvas id="resultChart" style="max-width: 100%; height: 400px;"></canvas>
  </div>

  <div id="categoryInfo"></div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    const questions = [
      "Мені подобається дізнаватися більше про себе",
      "Я вмію грати на музичному інструменті",
      "Найлегше вирішую проблеми, коли займаюся чимось фізичним",
      "У мене часто в голові звучить пісня або музичний твір",
      "Мені легко планувати бюджет і керувати грошима",
      "Мені легко вигадувати історії",
      "Я завжди мав/мала хорошу координацію",
      "Розмовляючи з кимось, я звертаю увагу не лише на сенс, а й на слова, які використовуються",
      "Я люблю кросворди, пошук слів або інші словесні головоломки",
      "Я не люблю неоднозначність, мені подобається ясність",
      "Мені подобаються логічні головоломки, наприклад судоку",
      "Я люблю медитувати",
      "Музика дуже важлива для мене",
      "Я переконливий/переконлива брехун/брехунка",
      "Я займаюся спортом або танцями",
      "Мене дуже цікавлять психометричні тести (тести особистості) та тести IQ",
      "Мене дратують люди, які поводяться нераціонально",
      "Музика, яка мені подобається, часто відповідає моєму емоційному стану",
      "Я дуже товариська людина і люблю бути серед людей",
      "Я люблю діяти системно та ретельно",
      "Мені легко розуміти графіки та діаграми",
      "Я добре кидаю речі — дротики, камінці, фрізбі тощо",
      "Мені легко запам’ятовувати цитати чи фрази",
      "Я завжди впізнаю місця, де вже бував/була, навіть у дитинстві",
      "Мені подобаються різні музичні стилі",
      "Коли я зосереджений/зосереджена, я часто щось малюю або креслю",
      "Я міг/могла б маніпулювати людьми, якби захотів/захотіла",
      "Я можу досить точно передбачити свої почуття та поведінку в певних ситуаціях",
      "Мені легко робити усні обчислення",
      "Я можу розпізнавати більшість звуків, не бачачи їх джерела",
      "У школі одним із моїх улюблених предметів була англійська мова",
      "Мені подобається обдумувати проблему, зважуючи всі наслідки",
      "Я люблю дебати та обговорення",
      "Я люблю екстремальні види спорту та страшні атракціони",
      "Мені більше подобаються індивідуальні види спорту",
      "Мені не байдуже, як почуваються люди навколо мене",
      "Мій дім повен фотографій та картин",
      "Я люблю щось майструвати — у мене вправні руки",
      "Мені подобається, коли музика звучить у фоновому режимі",
      "Я легко запам’ятовую телефонні номери",
      "Я ставлю собі цілі та плани на майбутнє",
      "Я дуже тактильна людина",
      "Я легко розумію, чи подобаюсь я комусь чи ні",
      "Я легко уявляю, як виглядає об’єкт з іншої точки зору",
      "Я ніколи не використовую інструкції для збирання меблів",
      "Мені легко спілкуватися з новими людьми",
      "Щоб навчитися чомусь новому, мені потрібно просто почати це робити",
      "Я часто бачу чіткі образи, коли заплющую очі",
      "Я не використовую пальці, коли рахую",
      "Я часто розмовляю сам/сама з собою — вголос або подумки",
      "У школі мені подобалися уроки музики",
      "За кордоном мені легко даються основи нової мови",
      "Я люблю й мені легко даються ігри з м’ячем",
      "Мій улюблений шкільний предмет — математика",
      "Я завжди знаю, як себе почуваю",
      "Я реалістично оцінюю свої сильні та слабкі сторони",
      "Я веду щоденник",
      "Я дуже уважний/уважна до мови тіла інших людей",
      "Мій улюблений предмет у школі — мистецтво",
      "Я отримую задоволення від читання",
      "Я легко читаю карти",
      "Мені боляче бачити, як хтось плаче, і не мати змоги допомогти",
      "Я добре вирішую конфлікти між іншими",
      "Я завжди мріяв/мріяла стати музикантом або співаком/співачкою",
      "Я надаю перевагу командним видам спорту",
      "Спів робить мене щасливим/щасливою",
      "Я ніколи не гублюся, навіть у незнайомому місці",
      "Коли я навчаюсь чомусь новому, мені подобається бачити схеми й малюнки",
      "Мені комфортно проводити час наодинці",
      "Друзі часто звертаються до мене за емоційною підтримкою та порадою"
    ];

    const answers = [
      "Переважно не згоден",
      "Частково не згоден",
      "Частково згоден",
      "Переважно згоден"
    ];

    const answerClasses = ["btn-1", "btn-2", "btn-3", "btn-4"];

    // Categories with question numbers (1-based)
    const categories = {
      "Мовний (лінгвістичний)": [6, 8, 9, 14, 23, 31, 33, 50, 52, 60],
      "Логіко-математичний": [5, 10, 11, 17, 20, 29, 32, 40, 49, 54],
      "Музичний": [2, 4, 13, 18, 25, 30, 39, 51, 64, 66],
      "Тілесно-кінестетичний": [3, 7, 15, 22, 34, 38, 42, 45, 47, 53],
      "Просторово-візуальний": [21, 24, 26, 37, 44, 48, 59, 61, 67, 68],
      "Міжособистісний": [19, 27, 36, 43, 46, 58, 62, 63, 65, 70],
      "Внутрішньоособистісний": [1, 12, 16, 28, 35, 41, 55, 56, 57, 69]
    };

    // Colors for categories
    const categoryColors = {
      "Мовний (лінгвістичний)": "#FF6384",
      "Логіко-математичний": "#36A2EB",
      "Музичний": "#FFCE56",
      "Тілесно-кінестетичний": "#4BC0C0",
      "Просторово-візуальний": "#9966FF",
      "Міжособистісний": "#FF9F40",
      "Внутрішньоособистісний": "#C9CBCF"
    };

    // Category descriptions for tooltip
    const categoryDescriptions = {
      "Мовний (лінгвістичний)": {
        description: "Слова та мова, писемна і усна; запам’ятовування, інтерпретація та пояснення ідей і інформації через мову, розуміння зв’язку між спілкуванням і значенням.",
        roles: "Письменники, юристи, журналісти, оратори, тренери, копірайтери, викладачі англійської мови, поети, редактори, лінгвісти, перекладачі, PR-консультанти, медіа-консультанти, телеведучі та радіоведучі, диктори.",
        activities: "Написати набір інструкцій; виступити з промовою на тему; редагувати написаний текст або роботу; написати промову; коментувати подію; застосувати позитивне або негативне трактування до історії.",
        learning: "Слова та мова."
      },
      "Логіко-математичний": {
        description: "Логічне мислення, виявлення закономірностей, наукове мислення та дедукція; аналіз проблем, виконання математичних обчислень, розуміння зв’язку між причиною і наслідком для досягнення конкретного результату.",
        roles: "Науковці, інженери, комп’ютерні фахівці, бухгалтери, статистики, дослідники, аналітики, торговці, банкіри, букмекери, страхові брокери, переговорники, укладачі угод, фахівці з вирішення проблем, директори.",
        activities: "Виконати усні арифметичні обчислення; створити процес для вимірювання чогось складного; проаналізувати, як працює машина; розробити процес; розробити стратегію для досягнення мети; оцінити вартість бізнесу або пропозиції.",
        learning: "Числа та логіка."
      },
      "Музичний": {
        description: "Музичні здібності, усвідомлення, сприйняття та використання звуків; розпізнавання тональних і ритмічних візерунків, розуміння зв’язку між звуком і почуттям.",
        roles: "Музиканти, співаки, композитори, діджеї, музичні продюсери, настройники піаніно, акустичні інженери, артисти, організатори свят, консультанти з навколишнього середовища та шуму, вокальні тренери.",
        activities: "Виконувати музичний твір; співати пісню; рецензувати музичну роботу; навчати когось грати на музичному інструменті; підбирати фонову музику для телефонних систем і приймалень.",
        learning: "Музика, звуки, ритм."
      },
      "Тілесно-кінестетичний": {
        description: "Контроль рухів тіла, мануальна спритність, фізична гнучкість і рівновага; координація очей і тіла.",
        roles: "Танцюристи, демонстратори, актори, спортсмени, дайвери, військові, пожежники, інструктори з фізичної підготовки, артисти виконавці; ергономісти, остеопати, рибалки, водії, ремісники; садівники, кухарі, акупунктуристи, цілителі, авантюристи.",
        activities: "Жонглювати; демонструвати спортивну техніку; кидати підставку для пива; створювати мімічний виступ для пояснення чогось; підкидати млинець; запускати повітряного змія; навчати правильної робочої постави, оцінювати ергономіку робочого місця.",
        learning: "Фізичний досвід і рух, дотик і відчуття."
      },
      "Просторово-візуальний": {
        description: "Візуальне та просторове сприйняття; інтерпретація та створення візуальних образів; образне уявлення та вираження; розуміння зв’язку між образами і значеннями, а також між простором і ефектом.",
        roles: "Художники, дизайнери, мультиплікатори, сценаристи, архітектори, фотографи, скульптори, містобудівники, візіонери, винахідники, інженери, консультанти з косметики та краси.",
        activities: "Спроектувати костюм; інтерпретувати картину; створити план кімнати; розробити корпоративний логотип; спроектувати будівлю; упакувати валізу або багажник автомобіля.",
        learning: "Зображення, форми, образи, тривимірний простір."
      },
      "Міжособистісний": {
        description: "Сприйняття почуттів інших людей; здатність встановлювати зв’язок з іншими; інтерпретація поведінки та спілкування; розуміння взаємин між людьми та їхніми ситуаціями, включно з іншими людьми.",
        roles: "Терапевти, фахівці з людських ресурсів, медіатори, лідери, консультанти, політики, педагоги, продавці, духовенство, психологи, вчителі, лікарі, цілителі, організатори, доглядальники, фахівці з реклами, тренери та наставники; (існує чіткий зв’язок між цим типом інтелекту та тим, що нині називають 'Емоційним інтелектом' або EQ).",
        activities: "Інтерпретувати настрій за виразами обличчя; демонструвати почуття за допомогою мови тіла; впливати на почуття інших цілеспрямовано; навчати або консультувати іншу людину.",
        learning: "Людський контакт, спілкування, співпраця, командна робота."
      },
      "Внутрішньоособистісний": {
        description: "Самосвідомість, особисте усвідомлення, особиста об’єктивність, здатність розуміти себе, свої взаємини з іншими і світом, а також власну потребу у змінах і реакцію на них.",
        roles: "Можна стверджувати, що це будь-хто, хто усвідомлює себе і бере участь у процесі зміни особистих думок, переконань і поведінки щодо своєї ситуації, інших людей, своїх цілей і призначення — у цьому сенсі є подібність із рівнем самоактуалізації за Маслоу, і знову ж таки існує чіткий зв’язок між цим типом інтелекту та тим, що нині називають 'Емоційним інтелектом' або EQ.",
        activities: "Розглянути і визначити власні цілі та необхідні особисті зміни для їх досягнення (не обов’язково відкривати це іншим); розглянути власне 'Вікно Йогарі' та визначити варіанти розвитку; розглянути і визначити власну позицію щодо моделі емоційного інтелекту.",
        learning: "Саморефлексія, самопізнання."
      }
    };

    // Question numbers for <16 years old as per your input
    const questionsUnder16 = [2,4,6,7,13,14,15,19,21,23,24,26,29,31,32,34,35,40,41,43,47,48,49,51,53,54,55,57,59,60,62,65,66,69,70];

    let userName = "";
    let userAge = 0;
    let userGender = "";
    let currentQuestionIndex = 0;
    let filteredQuestions = [];
    let answersGiven = [];
    let categoryScores = {};
    let chartInstance = null;

    document.getElementById("start-btn").addEventListener("click", () => {
      userName = document.getElementById("username").value.trim();
      userAge = parseInt(document.getElementById("userage").value);
      userGender = document.getElementById("usergender").value;

      if (!userName) {
        alert("Будь ласка, введіть ім’я.");
        return;
      }
      if (isNaN(userAge) || userAge < 0 || userAge > 120) {
        alert("Будь ласка, введіть коректний вік.");
        return;
      }
      if (!userGender) {
        alert("Будь ласка, оберіть стать.");
        return;
      }

      // Filter questions based on age
      if (userAge < 16) {
        filteredQuestions = questionsUnder16.map(num => ({
          index: num - 1,
          text: questions[num - 1]
        }));
      } else {
        filteredQuestions = questions.map((q, i) => ({ index: i, text: q }));
      }

      // Reset
      currentQuestionIndex = 0;
      answersGiven = [];
      categoryScores = {};
      for (const cat in categories) {
        categoryScores[cat] = 0;
      }

      document.getElementById("name-prompt").style.display = "none";
      document.getElementById("result").style.display = "none";
      document.getElementById("quiz-container").style.display = "block";
      showQuestion();
    });

    function showQuestion() {
      if (currentQuestionIndex >= filteredQuestions.length) {
        calculateResults();
        return;
      }
      const q = filteredQuestions[currentQuestionIndex];
      let questionText = q.text;

      // Adjust question text gender conjugation if needed (simplified example)
      if(userGender === "feminin"){
        // Just a placeholder for actual conjugation logic - complex in Ukrainian
        questionText = questionText.replace(/(я|міг|був|зосереджений|уважний)/gi, (match) => {
          const map = {
            "я": "я",
            "міг": "могла",
            "був": "була",
            "зосереджений": "зосереджена",
            "уважний": "уважна"
          };
          return map[match.toLowerCase()] || match;
        });
      }
      document.getElementById("question-number").textContent = `Питання ${currentQuestionIndex + 1} з ${filteredQuestions.length}`;
      document.getElementById("question-text").textContent = questionText;

      const optionsContainer = document.getElementById("options-container");
      optionsContainer.innerHTML = "";
      answers.forEach((answerText, i) => {
        // Adjust answer text gender if needed - example placeholder:
        let text = answerText;
        if(userGender === "feminin"){
          // no change in answer text in this example (could be added)
        }
        const btn = document.createElement("button");
        btn.textContent = text;
        btn.className = answerClasses[i];
        btn.onclick = () => {
          answersGiven.push(i + 1); // 1-4
          currentQuestionIndex++;
          showQuestion();
        };
        optionsContainer.appendChild(btn);
      });
    }

    function calculateResults() {
      // Sum points per category
      for (let i = 0; i < filteredQuestions.length; i++) {
        const qNum = filteredQuestions[i].index + 1; // 1-based
        const answerVal = answersGiven[i];
        for (const cat in categories) {
          if (categories[cat].includes(qNum)) {
            categoryScores[cat] += answerVal;
          }
        }
      }

      document.getElementById("quiz-container").style.display = "none";
      document.getElementById("result").style.display = "block";
      document.getElementById("result-title").textContent = `${userName}, ваші результати за категоріями:`;

      renderChart(categoryScores);
    }

    const categoryInfo = document.getElementById("categoryInfo");

    function renderChart(categoryScores) {
      const ctx = document.getElementById("resultChart").getContext("2d");
      if (chartInstance) {
        chartInstance.destroy();
      }

      // Sort categories descending by score
      const sortedEntries = Object.entries(categoryScores)
        .sort((a, b) => b[1] - a[1]);

      const dataLabels = sortedEntries.map(entry => entry[0]);
      const dataValues = sortedEntries.map(entry => entry[1]);
      const bgColors = dataLabels.map(cat => categoryColors[cat]);

      chartInstance = new Chart(ctx, {
        type: "bar",
        data: {
          labels: dataLabels,
          datasets: [{
            label: "Бали по категоріях",
            data: dataValues,
            backgroundColor: bgColors
          }]
        },
        options: {
          responsive: true,
          plugins: {
            tooltip: {
              enabled: false,
              external: context => {
                const tooltipModel = context.tooltip;
                if (tooltipModel.opacity === 0) {
                  categoryInfo.style.opacity = 0;
                  categoryInfo.style.display = 'none';
                  return;
                }
                const label = tooltipModel.dataPoints?.[0]?.label;
                if (!label) return;
                const catData = categoryDescriptions[label];
                if (!catData) return;

                categoryInfo.innerHTML = `
                  <strong style="color:${categoryColors[label]}">${label}</strong><br><br>
                  <strong>Опис інтелекту:</strong><br>${catData.description}<br><br>
                  <strong>Типові ролі, уподобання, потенціал:</strong><br>${catData.roles}<br><br>
                  <strong>Пов’язані завдання, діяльність або тести:</strong><br>${catData.activities}<br><br>
                  <strong>Переважний стиль навчання:</strong><br>${catData.learning}
                `;
                const canvasRect = context.chart.canvas.getBoundingClientRect();
                categoryInfo.style.left = (canvasRect.left + tooltipModel.caretX + window.pageXOffset + 15) + 'px';
                categoryInfo.style.top = (canvasRect.top + tooltipModel.caretY + window.pageYOffset + 15) + 'px';
                categoryInfo.style.opacity = 1;
                categoryInfo.style.display = 'block';
              }
            },
            legend: { display: false }
          },
          scales: {
            y: {
              beginAtZero: true,
              ticks: { stepSize: 2 }
            }
          }
        }
      });
    }

    // Hide tooltip when mouse leaves canvas
    document.getElementById("resultChart").addEventListener("mouseleave", () => {
      categoryInfo.style.opacity = 0;
      categoryInfo.style.display = 'none';
    });
  </script>
</body>
</html>
